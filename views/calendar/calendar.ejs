<head>
  <link href="/css/calendar/calendar.css" rel="stylesheet">
  <link href="/css/calendar/calendar_check.css" rel="stylesheet">

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<!-- ======= Hero Section ======= -->
<section id="hero" class="d-flex align-items-center">

  <div class="container">
    <div class="row">


      <div class="col-lg-6 pt-5 pt-lg-0 order-2 order-lg-1 d-flex flex-column justify-content-center">

        <!-- ======= calendar ======= -->
        <table class="scriptCalendar">
          <thead>
            <tr>
              <td onClick="prevCalendar();" style="cursor:pointer;">&#60;&#60;</td>
              <td colspan="5">
                <span id="calYear">YYYY</span>년
                <span id="calMonth">MM</span>월
              </td>
              <td onClick="nextCalendar();" style="cursor:pointer;">&#62;&#62;</td>
            </tr>
            <tr>
              <td>일</td>
              <td>월</td>
              <td>화</td>
              <td>수</td>
              <td>목</td>
              <td>금</td>
              <td>토</td>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <!-- ======= symtom_check ======= -->
      <div class="col-lg-6 pt-lg-0 order-2 order-lg-1">
        <form action="http://localhost:3000/calendar/1" method="post">
        <div class="symtom_check">
          <div>
            <div class="symtom_check_left">
              <div class="date">
                <div class="title"> <p id = "selected_date"> 날짜 </p></div>
                  <!-- <script>
                  date = new Date();
                  year = date.getFullYear();
                  month = date.getMonth() + 1;
                  day = date.getDate();
                  document.getElementById("current_date").innerHTML = "날짜: "+ year + "/" + month + "/" + day;
                  </script> -->
              </div>

              <div class="hospital">
                <div class="title"><p>병원 일정</p></div>
                <div class="hospitalContent">
                  <% if (typeof calendarDataResult !== 'undefined' && calendarDataResult && typeof calendarDataResult.hospital_schedule !== 'undefined' && calendarDataResult.hospital_schedule && typeof calendarDataResult.hospital_schedule.hospital_name !== 'undefined') { %>
                    <input id="inputhosName" type="text" name="hospital_name" value="<%= calendarDataResult.hospital_schedule.hospital_name %>">
                  <% } else { %>
                    <input id="inputhosName" type="text" name="inputhosNametext" value="">
                  <% } %>
                  
                  
                  
                  
                  <div class="hospitalTime">
                    <div class="box-body">
                      <% if (typeof calendarDataResult !== 'undefined' && calendarDataResult && typeof calendarDataResult.hospital_schedule !== 'undefined' && calendarDataResult.hospital_schedule && typeof calendarDataResult.hospital_schedule.booking_hour !== 'undefined') { %>
                        <!-- <% console.log(calendarDataResult.hospital_schedule.booking_hour) %> -->
                        <% const hour =  calendarDataResult.hospital_schedule.booking_hour%>
                        <select id="9to6" name="hospital_schedule" autocomplete="off">
                          <option value="9:00:00" <% if (hour === '9:00:00') { %>selected<% } %>>9:00</option>
                          <option value="10:00:00" <% if (hour === '10:00:00') { %>selected<% } %>>10:00</option>
                          <option value="11:00:00" <% if (hour === '11:00:00') { %>selected<% } %>>11:00</option>
                          <option value="12:00:00" <% if (hour === '12:00:00') { %>selected<% } %>>12:00</option>
                          <option value="13:00:00" <% if (hour === '13:00:00') { %>selected<% } %>>13:00</option>
                          <option value="14:00:00" <% if (hour === '14:00:00') { %>selected<% } %>>14:00</option>
                          <option value="15:00:00" <% if (hour === '15:00:00') { %>selected<% } %>>15:00</option>
                          <option value="16:00:00" <% if (hour === '16:00:00') { %>selected<% } %>>16:00</option>
                          <option value="17:00:00" <% if (hour === '17:00:00') { %>selected<% } %>>17:00</option>
                          <option value="18:00:00" <% if (hour === '18:00:00') { %>selected<% } %>>18:00</option>
                        </select>
                        <% } else { %>
                          <select id="9to6" name="hospital_schedule" autocomplete="off">
                            <option value="9:00:00">9:00</option>
                            <option value="10:00:00">10:00</option>
                            <option value="11:00:00">11:00</option>
                            <option value="12:00:00">12:00</option>
                            <option value="13:00:00">13:00</option>
                            <option value="14:00:00">14:00</option>
                            <option value="15:00:00">15:00</option>
                            <option value="16:00:00">16:00</option>
                            <option value="17:00:00">17:00</option>
                            <option value="18:00:00">18:00</option>
                          </select>
                          <% }  %>

                    </div>
                  </div>
                </div>
              </div>


              <div class="check">
                <div class="titleC"> <p id="checkli"> 체크사항 </p> </div>
              <div class="checkTB1">
                  <div id="item_list">
                    <table>
                        <% if (typeof calendarDataResult !== 'undefined' && calendarDataResult && typeof calendarDataResult.check_list !== 'undefined' && calendarDataResult.check_list && calendarDataResult.check_list.length !== 0) { %>
                        <!-- <% console.log("checkMeow!! " + calendarDataResult) %> -->
                    
                        <% for (let i = 0; i < calendarDataResult.check_list.length; i++) { %>
                          <tr>
                            <td class="item">
                              <div class="checkbox">
                                <input type="checkbox" name="check_list" id="<%= i %>" <%= calendarDataResult.check_list[i].is_check === 1 ? 'checked' : '' %> />
                              </div>
                              <div class="content"><%= calendarDataResult.check_list[i].content %></div>
                            </td>
                          </tr>
                        <% } %>
                      <% } else { %>
                        <!-- <input id="inputhosName" type="text" name="inputhosNametext" value=""> -->
                        <!-- <% console.log("checkMeow!!fail " ) %> -->
                        <!-- Default Contents -->
                        <tr>
                          <td class="item">
                            <div class="checkbox">
                              <input type="checkbox" name="check_list" id="morning" />
                            </div>
                            <div class="content">아침 약 복용</div>
                          </td>
                        </tr>
                        <tr>
                          <td class="item">
                            <div class="checkbox">
                              <input type="checkbox" name="check_list" id="lunch" />
                            </div>
                            <div class="content">점심 약 복용</div>
                          </td>
                        </tr>
                        <tr>
                          <td class="item">
                            <div class="checkbox">
                              <input type="checkbox" name="check_list" id="dinner" />
                            </div>
                            <div class="content">저녁 약 복용</div>
                          </td>
                        </tr>
                      <% } %>
                      
                    </table>
                  </div>
                  <div id="checkForm">
                    <div class="additemdiv">
                    <input type="text" id="item"  />
                  <button type="button" id="add" class="addBtn">추가</button> 
                    </div></div></div>
                   </div>
                  
             

              <div class="sleeping-time">
                <div class="title"> <p> 수면시간 </p> </div>
                <div class="time">
                  <button class="btn one" type="button"  onclick="setSelectedValue('3')">        
                      <span> 3시간↓ </span>
                    </label> 
                  </button>
                  <button class="btn two" type="button" name="sleeping_time" value="4">     
                    <label>
                      <span>4시간</span>
                    </label> 
                  </button>
                  <button class="btn three" type="button" name="sleeping_time" value="5">    
                    <label>
                      <span>5시간</span>
                    </label> 
                  </button>
                  <button class="btn four" type="button" name="sleeping_time" value="6">    
                    <label>
                      <span>6시간</span>
                    </label> 
                  </button>
                  <button class="btn five" type="button" name="sleeping_time" value="7">    
                    <label>
                      <span>7시간</span>
                    </label> 
                  </button>
                  <button class="btn six" type="button" name="sleeping_time" value="8">    
                    <label>
                      <span>8시간</span>
                    </label> 
                  </button>
                  <button class="btn seven" type="button" name="sleeping_time" value="9">    
                    <label>
                      <span>9시간</span>
                    </label> 
                  </button>
                  <button class="btn eight" type="button" name="sleeping_time" value="10">    
                    <label>
                      <span>10시간</span>
                    </label> 
                  </button>
                  <button class="btn nine" type="button" name="sleeping_time" value="11">    
                    <label>
                      <span>11시간</span>
                    </label> 
                  </button>
                  <button class="btn ten" type="button" name="sleeping_time" value="12">    
                    <label>
                      <span>12시간</span>
                    </label> 
                  </button>
                  <button class="btn eleven" type="button" name="sleeping_time" value="13">    
                    <label>
                      <span>13시간</span>
                    </label> 
                  </button>
                  <button class="btn twelve" type="button" name="sleeping_time" value="14">    
                    <label>
                      <span>14시간</span>
                    </label> 
                  </button>
                  <button class="btn thirteen" type="button" name="sleeping_time" value="15">    
                    <label>
                      <span>15시간</span>
                    </label> 
                  </button>
                  <button class="btn fourteen" type="button" name="sleeping_time" value="16">     
                    <label>
                      <span>16시간</span>
                    </label> 
                  </button>
                  <button class="btn fifteen" type="button" name="sleeping_time" value="17">      
                    <label>
                      <span>17시간↑</span>
                    </label> 
                  </button>
                  <script>
                    // 이벤트 핸들러 함수
                    function handleButtonClick(event) {
                      const buttons = document.getElementsByClassName('btn');
                      for (let i = 0; i < buttons.length; i++) {
                        buttons[i].classList.remove('active');
                      }
                      event.currentTarget.classList.add('active');
                    }
                  
                    // 버튼들에 클릭 이벤트 핸들러 등록
                    const buttons = document.getElementsByClassName('btn');
                    for (let i = 0; i < buttons.length; i++) {
                      buttons[i].addEventListener('click', handleButtonClick);
                    }
                  </script>
                        
                    
                </div>
                

                
              </div>

            </div>


            <div class="symtom_check_right">
              <div class="symtom">
                <div class="title"> <p> 증상 </p> </div>
                <div>
                  <div class="symtomTextBox 1">
                    <input class="inputbX" type="text" name="symtom_text">
                    <p><input type="time" class="symtom-time" name="symtom_time"></p>             
                  </div>
                  
                  <div class="box-body"> 
                      <input type="range" min="1" max="10" id="ex-in1" class="range-in" name="symtom_range">  
                    <div id="ex-out1" class="range-out"></div>
                    <script>
                    document.querySelector('#ex-in1').addEventListener('input',e=>{
                    document.querySelector('#ex-out1').innerHTML= e.target.value;
                    });
                    </script>           
                    </div>

                  <div class="symtomTextBox 2">
                    <input class="inputbX" type="text"  name="symtom_text">
                    <p><input type="time" class="symtom-time" name="symtom_time"></p>                     
                  </div>
                  <div class="box-body"> 
                    <input type="range" min="1" max="10" id="ex-in2" class="range-in" name="symtom_range">    
                  <div id="ex-out2" class="range-out"></div>
                  <script>
                  document.querySelector('#ex-in2').addEventListener('input',e=>{
                  document.querySelector('#ex-out2').innerHTML= e.target.value;
                  });
                  </script>           
                  </div>
                  <div class="symtomTextBox 3">
                    <input class="inputbX" type="text"  name="symtom_text">
                    <p><input type="time" class="symtom-time"  name="symtom_range"></p>                     
                  </div>
                  <div class="box-body"> 
                    <input type="range" min="1" max="10" id="ex-in3" class="range-in" name="symtom_range">    
                  <div id="ex-out3" class="range-out"></div>
                  <script>
                  document.querySelector('#ex-in3').addEventListener('input',e=>{
                  document.querySelector('#ex-out3').innerHTML= e.target.value;
                  });
                  </script>           
                  </div>
                  <div class="symtomTextBox 4">
                    <input class="inputbX" type="text" name="symtom_text">
                    <p><input type="time" class="symtom-time" name="symtom_range"></p>                     
                  </div>
                  <div class="box-body"> 
                    <input type="range" min="1" max="10" id="ex-in4" class="range-in" name="symtom_range">
                  <div id="ex-out4" class="range-out"></div>
                  <script>
                  document.querySelector('#ex-in4').addEventListener('input',e=>{
                  document.querySelector('#ex-out4').innerHTML= e.target.value;
                  });
                  </script>           
                  </div>

                </div>
              </div>

              <div class="diary">
                <div class="title"> <p> 관찰일기 </p> </div>
                <div class="diaryTextBox">
                  <% if (typeof calendarDataResult !== 'undefined' && calendarDataResult && typeof calendarDataResult.calendar !== 'undefined' && calendarDataResult.calendar && typeof calendarDataResult.calendar.diary !== 'undefined') { %>
                    <!-- <% console.log("Date" + calendarDataResult.calendar.diary) %> -->
                    <input id="inputBx" type="text" name="diarytext" value="<%= calendarDataResult.calendar.diary %>">
                  <% } else { %>
                    <input id="inputBx" type="text" name="diarytext" value="">
                  <% } %>                    
                </div>
                <div class="symBtndiv">
                  <button type="submit" id="symB" class="symBtn">저장</button>
                </div>
              </div>
                  
                
            </div>

          </div>


        </div>
      </form>
      </div>

    </div>
  </div>

</section><!-- End Hero -->
<!-- <script src="/js/calendar.js"></script> -->
<%-include('calendar_memory.ejs') %>
